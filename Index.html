<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Ultimate Scare — Free Robux</title>
<style>
  :root{
    --bg:#04060a;
    --card:#0b0f18;
    --accent:#7be0ff;
    --danger:#ff0a0a;
    --water:"[By zrkdee trojan]";
  }
  *{box-sizing:border-box;font-family:Inter,Segoe UI,Roboto,Arial,sans-serif}
  html,body{height:100%;margin:0;background:radial-gradient( circle at 10% 10%, #07111a 0%, var(--bg) 35% ); color:#e8f7ff; -webkit-font-smoothing:antialiased}
  .wrap{min-height:100%;display:flex;align-items:center;justify-content:center;padding:28px}
  .card{width:100%;max-width:960px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.03));border-radius:14px;box-shadow:0 12px 60px rgba(2,6,23,0.7);padding:28px;position:relative;overflow:hidden;border:1px solid rgba(255,255,255,0.03)}
  header{display:flex;gap:14px;align-items:center;margin-bottom:18px}
  .logo{width:72px;height:72px;background:linear-gradient(135deg,#00d4ff,#7b2cff);border-radius:12px;display:flex;align-items:center;justify-content:center;font-weight:900}
  h1{margin:0;font-size:22px}
  .small{margin:6px 0 14px;color:#9fb9d0;font-size:13px}
  .form{display:flex;gap:12px;align-items:center}
  .form input{flex:1;padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit;font-size:15px}
  .btn{padding:12px 18px;border-radius:10px;border:0;background:linear-gradient(90deg,var(--accent),#b28eff);color:#052228;font-weight:800;cursor:pointer;box-shadow:0 8px 22px rgba(123,46,255,0.12)}
  .muted{opacity:.85;color:#9fb9d0;font-size:13px;margin-top:12px}
  .watermark{position:fixed;right:12px;bottom:10px;background:rgba(0,0,0,0.55);padding:6px 8px;border-radius:8px;font-size:12px;color:#ffdfe0;border:1px solid rgba(255,255,255,0.03);z-index:999999}
  .danger-box{margin-top:14px;padding:10px;border-radius:10px;background:linear-gradient(180deg, rgba(255,10,10,0.05), rgba(255,10,10,0.02));border:1px solid rgba(255,10,10,0.06);color:#ffdede;font-weight:700}
  /* overlays */
  .overlay{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;z-index:99998;pointer-events:none;visibility:hidden;opacity:0;transition:opacity .12s linear}
  .overlay.show{visibility:visible;opacity:1;pointer-events:auto}
  .scare-box{position:relative;display:flex;align-items:center;justify-content:center;flex-direction:column;gap:8px}
  .scare-img{width:100vmin;max-width:1600px;height:auto;transform:scale(1);transition:transform .06s linear}
  .scare-caption{font-size:clamp(18px,3.4vw,36px);font-weight:900;color:var(--danger);text-transform:uppercase;letter-spacing:2px;text-shadow:0 6px 24px rgba(255,0,0,0.25)}
  /* distortion layer */
  .distort{position:absolute;inset:0;background:transparent;mix-blend-mode:overlay;pointer-events:none}
  /* strobe */
  .strobe{position:absolute;inset:0;pointer-events:none;background:#fff;opacity:0}
  /* shake animation */
  @keyframes shake {
    0%{transform:translateX(0) translateY(0) rotate(0deg)}
    10%{transform:translateX(-18px) rotate(-2deg)}
    20%{transform:translateX(14px) rotate(2deg)}
    30%{transform:translateX(-12px) rotate(-1.2deg)}
    40%{transform:translateX(10px) rotate(1.2deg)}
    50%{transform:translateX(-8px) rotate(-0.8deg)}
    60%{transform:translateX(6px) rotate(0.7deg)}
    70%{transform:translateX(-4px) rotate(-0.4deg)}
    80%{transform:translateX(2px) rotate(0.2deg)}
    100%{transform:translateX(0) rotate(0)}
  }
  /* zoom */
  .zoomBig{transform:scale(1.35)}
  /* quick invert flash */
  .invert{filter:invert(1) hue-rotate(180deg) saturate(1.8)}
  /* small helpers */
  .hidden{display:none}
  /* accessibility note */
  .note-access{font-size:13px;color:#c3d9e6;margin-top:10px}
  @media(max-width:640px){
    .logo{width:56px;height:56px}
    .card{padding:18px}
  }
</style>
</head>
<body>
  <div class="wrap">
    <div class="card" id="card">
      <header>
        <div class="logo">RBX</div>
        <div>
          <h1>Ultimate Free Robux Generator — 2025</h1>
          <div class="small">Введи ник и нажми Generate — серия проверок... (шутка в конце)</div>
        </div>
      </header>

      <div class="form" id="formArea">
        <input id="username" placeholder="Введите ник (например zrkdee123)" />
        <button class="btn" id="generate">Generate</button>
      </div>

      <div class="muted">После нажатия будет запущена серия интенсивных скримеров (несколько). Поддержка fullscreen доступна.</div>
      <div class="danger-box">⚠️ Предупреждение: интенсивное мигание/звуки. Не для людей с эпилепсией, сердечными проблемами или беременных.</div>
      <div class="note-access">Если хочешь чуть мягче — скажи «слегка»; если максимально — скажи «максимум» (но ты уже нажал Generate — сейчас запуск будет максимальный).</div>
    </div>
  </div>

  <div class="watermark">[By zrkdee trojan]</div>

  <!-- overlay для скримеров -->
  <div class="overlay" id="overlay">
    <div class="scare-box" id="scareBox">
      <img id="scareImg" class="scare-img" src="" alt="" />
      <div id="scareCaption" class="scare-caption"></div>
    </div>
    <div class="distort" id="distortLayer"></div>
    <div class="strobe" id="strobe"></div>
  </div>

<script>
/* ============ Основная логика ============ */
/*
  Поведение:
  - По клику: запрашиваем fullscreen (пользовательский жест), блокируем интерфейс.
  - Запускаем цепочку случайных "сцена" событий (3..6), каждое событие случайно выбирает эффекты:
    - Показывает SVG-пугающую картинку (встроенная data URI).
    - Включает слои: strobe, invert, zoom, shake, distortion.
    - Воспроизводит сложный звук через WebAudio (шум + осцилляторы + LFO).
  - Количество/интенсивность регулируются случайно (или можно добавить 'slightly'/'max' позже).
  - В конце запускаем спокойную короткую озвучку TTS: "Это была шутка. Успокойся."
*/

const generateBtn = document.getElementById('generate');
const usernameInput = document.getElementById('username');
const overlay = document.getElementById('overlay');
const scareImg = document.getElementById('scareImg');
const scareCaption = document.getElementById('scareCaption');
const strobe = document.getElementById('strobe');
const distortLayer = document.getElementById('distortLayer');
const card = document.getElementById('card');

let audioCtx = null;

function rand(min, max){ return Math.random()*(max-min)+min; }
function choice(arr){ return arr[Math.floor(Math.random()*arr.length)]; }

/* Встроенные "страшные" SVG картинки (data URIs) — несколько вариантов */
const svgs = [
  // stylized screaming face with red eyes
  `data:image/svg+xml;utf8,${encodeURIComponent(`<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1000 800'>
    <defs>
      <radialGradient id='g' cx='30%' cy='20%'><stop offset='0' stop-color='#fff'/><stop offset='1' stop-color='#000'/></radialGradient>
    </defs>
    <rect width='100%' height='100%' fill='black'/>
    <g transform='translate(0,40)'>
      <ellipse cx='500' cy='450' rx='380' ry='300' fill='#07070a' stroke='#1a0010' stroke-width='6'/>
      <g>
        <ellipse cx='330' cy='300' rx='60' ry='85' fill='#ff0011' />
        <ellipse cx='670' cy='300' rx='60' ry='85' fill='#ff0011' />
        <circle cx='330' cy='300' r='18' fill='#0a0000'/>
        <circle cx='670' cy='300' r='18' fill='#0a0000'/>
      </g>
      <path d='M230 480 C 380 580, 620 580, 770 480 C600 750,420 740,230 480' fill='#0b0000' stroke='#4a0000' stroke-width='8'/>
      <g transform='translate(380,180)'>
        <path d='M10 10 C 30 0, 70 0, 90 10 C 120 30, 120 80, 90 100 C 70 110, 30 110, 10 100 C -20 80, -20 30, 10 10' fill='url(#g)' opacity='0.1'/>
      </g>
    </g>
  </svg>`)}`,
  // close-up cracked mask
  `data:image/svg+xml;utf8,${encodeURIComponent(`<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1200 800'>
    <rect width='100%' height='100%' fill='#050506'/>
    <g transform='translate(60,40)'>
      <rect x='0' y='0' width='1080' height='720' rx='60' fill='#0b0b0b'/>
      <circle cx='540' cy='300' r='220' fill='#1b0011'/>
      <circle cx='450' cy='260' r='48' fill='#ff0011'/>
      <circle cx='630' cy='260' r='48' fill='#ff0011'/>
      <path d='M400 420 C520 560,660 560,800 420' fill='#040000' stroke='#3b0000' stroke-width='10'/>
      <g stroke='#2a0000' stroke-width='6'>
        <path d='M320 160 L380 180'/>
        <path d='M740 150 L680 170'/>
        <path d='M520 80 L540 140'/>
      </g>
    </g>
  </svg>`)}`,
  // skeletal grin
  `data:image/svg+xml;utf8,${encodeURIComponent(`<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 900 900'>
    <rect width='100%' height='100%' fill='#000'/>
    <g transform='translate(20,10)'>
      <circle cx='450' cy='420' r='320' fill='#06060a' stroke='#111' stroke-width='8'/>
      <ellipse cx='320' cy='310' rx='58' ry='82' fill='#ff3b3b'/>
      <ellipse cx='580' cy='310' rx='58' ry='82' fill='#ff3b3b'/>
      <path d='M270 520 C 360 660,540 660,630 520 C540 780,360 780,270 520' fill='#040000' />
      <g fill='#fff' transform='translate(320,430)'>
        <rect x='-40' y='20' width='20' height='48' />
        <rect x='-10' y='20' width='20' height='48' />
        <rect x='20' y='20' width='20' height='48' />
        <rect x='50' y='20' width='20' height='48' />
      </g>
    </g>
  </svg>`)}`,
  // abstract red noise
  `data:image/svg+xml;utf8,${encodeURIComponent(`<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1000 600'>
    <rect width='100%' height='100%' fill='#040205'/>
    <g>
      <rect x='0' y='0' width='100%' height='100%' fill='url(#r)' opacity='0.9'/>
      <defs>
        <radialGradient id='r'><stop offset='0' stop-color='#ff0a0a'/><stop offset='1' stop-color='#0a0000'/></radialGradient>
      </defs>
      <g transform='translate(60,40)' fill='#2a0000' opacity='0.9'>
        <circle cx='200' cy='220' r='160'/>
        <circle cx='540' cy='180' r='200'/>
        <circle cx='760' cy='380' r='110'/>
      </g>
    </g>
  </svg>`)}`,
];

/* Создаёт audio context при первом требуемом звуке */
function ensureAudio(){
  if(!audioCtx){
    try{
      audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    }catch(e){
      console.warn("AudioContext unavailable", e);
      audioCtx = null;
    }
  }
  return audioCtx;
}

/* Генерация "срезанных" звуков: шум + осцилляторы + ударный импульс */
function playScareSound(intensity=1.0, duration=0.6){
  const ctx = ensureAudio();
  if(!ctx) return;
  const now = ctx.currentTime;
  // white noise
  const bufferSize = ctx.sampleRate * duration;
  const buffer = ctx.createBuffer(1, bufferSize, ctx.sampleRate);
  const data = buffer.getChannelData(0);
  for(let i=0;i<bufferSize;i++){
    // шум с экспоненциальным спадом
    data[i] = (Math.random()*2-1) * Math.pow(1 - i/bufferSize, 1.8);
  }
  const noise = ctx.createBufferSource();
  noise.buffer = buffer;
  const noiseGain = ctx.createGain();
  noiseGain.gain.setValueAtTime(0.0001, now);
  // intensity влияет на громкость и длительность
  noiseGain.gain.exponentialRampToValueAtTime(0.6 * intensity, now + 0.02);
  noiseGain.gain.exponentialRampToValueAtTime(0.0001, now + duration - 0.02);
  noise.connect(noiseGain).connect(ctx.destination);
  noise.start(now);

  // низкочастотный рев (sine + saw)
  const low = ctx.createOscillator();
  low.type = 'sine';
  low.frequency.setValueAtTime(80 * (1 + intensity*0.4), now);
  const lowGain = ctx.createGain();
  lowGain.gain.setValueAtTime(0.0001, now);
  lowGain.gain.linearRampToValueAtTime(0.45 * intensity, now + 0.06);
  lowGain.gain.exponentialRampToValueAtTime(0.0001, now + duration);
  low.connect(lowGain).connect(ctx.destination);
  low.start(now);
  low.stop(now + duration);

  // звуковой "хлопок" — короткий кусок белого шума через фильтр
  const clap = ctx.createBufferSource();
  clap.buffer = buffer;
  const clapFilter = ctx.createBiquadFilter();
  clapFilter.type = 'highpass';
  clapFilter.frequency.setValueAtTime(800, now);
  const clapGain = ctx.createGain();
  clapGain.gain.setValueAtTime(0.0001, now);
  clapGain.gain.exponentialRampToValueAtTime(1.0 * intensity, now + 0.01);
  clapGain.gain.exponentialRampToValueAtTime(0.0001, now + 0.07);
  clap.connect(clapFilter).connect(clapGain).connect(ctx.destination);
  clap.start(now + 0.03);
  clap.stop(now + 0.09);

  // create short high-pitched smear
  const hi = ctx.createOscillator();
  hi.type = 'sawtooth';
  hi.frequency.setValueAtTime(900 * (1 + Math.random()*0.6), now);
  const hiGain = ctx.createGain();
  hiGain.gain.setValueAtTime(0.0001, now);
  hiGain.gain.exponentialRampToValueAtTime(0.9 * intensity, now + 0.01);
  hiGain.gain.exponentialRampToValueAtTime(0.0001, now + Math.min(duration,0.25));
  hi.connect(hiGain).connect(ctx.destination);
  hi.start(now);
  hi.stop(now + Math.min(duration,0.25));
}

/* Маленькие визуальные эффекты */
function doShake(duration=800){
  card.style.animation = `shake ${duration}ms linear`;
  setTimeout(()=> card.style.animation = '', duration+50);
}
function doInvert(duration=300){
  overlay.classList.add('show');
  scareImg.classList.add('invert');
  setTimeout(()=> scareImg.classList.remove('invert'), duration);
}
function doZoomBig(duration=400){
  scareImg.classList.add('zoomBig');
  setTimeout(()=> scareImg.classList.remove('zoomBig'), duration);
}
function doStrobe(bursts=6, speed=60){
  strobe.style.opacity = 1;
  let i = 0;
  const interval = setInterval(()=>{
    // toggle white flash
    strobe.style.opacity = (i%2===0) ? 1 : 0;
    i++;
    if(i>bursts*2){
      clearInterval(interval);
      strobe.style.opacity = 0;
    }
  }, speed);
}
function doDistort(duration=700){
  distortLayer.style.background = `repeating-linear-gradient(45deg, rgba(255,0,0,0.02), rgba(255,0,0,0.02) 4px, rgba(0,0,0,0.03) 4px, rgba(0,0,0,0.03) 8px)`;
  distortLayer.style.mixBlendMode = choice(['overlay','darken','multiply']);
  setTimeout(()=> distortLayer.style.background = 'transparent', duration);
}

/* Запуск одной "сцены" — комбинация эффектов */
async function runScene(options = {}){
  // options: svg, caption, intensity [0.4..1.6], duration
  overlay.classList.add('show');
  const svg = options.svg || choice(svgs);
  scareImg.src = svg;
  scareCaption.textContent = options.caption || choice([
    "IT'S COMING",
    "NO ESCAPE",
    "YOU'RE MINE",
    "DON'T LOOK AWAY",
    "WAKE UP"
  ]);
  // small random delay before heavy
  await wait(rand(150,380));

  // effects selection
  const effects = [];
  if(Math.random() < 0.9) effects.push('sound');
  if(Math.random() < 0.85) effects.push('shake');
  if(Math.random() < 0.7) effects.push('strobe');
  if(Math.random() < 0.6) effects.push('zoom');
  if(Math.random() < 0.45) effects.push('invert');
  if(Math.random() < 0.5) effects.push('distort');

  const intensity = options.intensity || rand(0.7,1.4);
  const duration = options.duration || Math.round(rand(400,1300));

  // possibly request fullscreen to cover browser chrome (user gesture already)
  try{
    if(document.fullscreenElement === null && Math.random() < 0.6){
      document.documentElement.requestFullscreen()?.catch(()=>{});
    }
  }catch(e){ /* ignore */ }

  // schedule effects with slight offsets for maximum shock
  if(effects.includes('sound')){
    setTimeout(()=> playScareSound(intensity, Math.max(0.4, Math.min(1.2, duration/1000))), rand(0,80));
  }
  if(effects.includes('strobe')){
    // strobe faster if intensity high
    setTimeout(()=> doStrobe(Math.round(rand(4,8)), intensity>1 ? 40 : 70), rand(0,30));
  }
  if(effects.includes('shake')){
    setTimeout(()=> doShake(Math.round(duration*1.1)), rand(10,50));
  }
  if(effects.includes('zoom')){
    setTimeout(()=> doZoomBig(Math.max(200, duration)), 40);
  }
  if(effects.includes('invert')){
    setTimeout(()=> doInvert(Math.max(140, Math.min(700, duration))), 10);
  }
  if(effects.includes('distort')){
    setTimeout(()=> doDistort(Math.max(200, duration)), 30);
  }

  // keep overlay visible a bit longer for effect
  await wait(duration + rand(80,420));

  // quick "fade" out of overlay
  overlay.classList.remove('show');
  scareImg.src = '';
  scareCaption.textContent = '';
  await wait(150);
}

/* Helper wait */
function wait(ms){ return new Promise(res=>setTimeout(res, ms)); }

/* Основной сценарий — серия сцен 3..6 */
async function startSequence(){
  generateBtn.disabled = true;
  usernameInput.disabled = true;

  // small intro fake progress
  let progress = 0;
  const maxScenes = Math.floor(rand(4,7)); // 4..6
  const sequence = [];
  for(let i=0;i<maxScenes;i++){
    sequence.push({
      svg: choice(svgs),
      caption: choice(["IT'S COMING","NO ESCAPE","YOU'RE WATCHED","ALONE","THIS ISn'T REAL","WHO IS THERE"]),
      intensity: rand(0.8,1.6),
      duration: Math.round(rand(420,1200))
    });
  }

  // show quick fake "generation" UI feedback by small flashes on card
  for(let i=0;i<6;i++){
    card.style.transform = `translateY(${(i%2===0)?-4:2}px)`;
    await wait(80);
  }
  card.style.transform = '';

  // run scenes one by one
  for(let i=0;i<sequence.length;i++){
    // small pause between scenes, but sometimes immediate chain
    await wait(rand(180,600));
    await runScene(sequence[i]);
    // after some scenes optionally play an "ambient" low rumble
    if(Math.random() < 0.4){
      playScareSound(0.85, 0.9);
      await wait(250);
    }
  }

  // финальная кульминация: объединяем эффекты
  overlay.classList.add('show');
  scareImg.src = choice(svgs);
  scareCaption.textContent = "FINAL";
  // intense burst
  doDistort(900);
  doStrobe(12, 40);
  doShake(1100);
  playScareSound(1.6, 1.1);
  await wait(1200);
  overlay.classList.remove('show');
  scareImg.src = '';

  // завершающее озвучивание — спокойное (TTS)
  await wait(300);
  speakFinalMessage(`Это была шутка. Расслабься. Сделано: By zrkdee trojan.`);
  // unlock UI
  generateBtn.disabled = false;
  usernameInput.disabled = false;
  try{
    if(document.fullscreenElement) await document.exitFullscreen();
  }catch(e){}
}

/* TTS */
function speakFinalMessage(text){
  if('speechSynthesis' in window){
    const ut = new SpeechSynthesisUtterance(text);
    ut.lang = 'ru-RU';
    ut.rate = 0.95;
    ut.pitch = 0.9;
    window.speechSynthesis.cancel();
    window.speechSynthesis.speak(ut);
  }else{
    // fallback — soft beep via audio
    const ctx = ensureAudio();
    if(!ctx) return;
    const now = ctx.currentTime;
    const osc = ctx.createOscillator();
    osc.type = 'sine';
    osc.frequency.setValueAtTime(440, now);
    const g = ctx.createGain();
    g.gain.setValueAtTime(0.0001, now);
    g.gain.linearRampToValueAtTime(0.25, now+0.02);
    g.gain.linearRampToValueAtTime(0.0001, now+0.9);
    osc.connect(g).connect(ctx.destination);
    osc.start(now);
    osc.stop(now+0.9);
  }
}

/* Привязка кнопки — запускаем sequence при клике (gesture) */
generateBtn.addEventListener('click', async (ev)=>{
  // сохранить возможный режим (если пользователь написал "слегка" или "максимум" в поле — НЕ спрашиваем)
  const name = usernameInput.value.trim();
  // безопасный guard: если поле содержит слово 'легко' или 'слегка' — уменьшить интенсивность (в этом impl — просто запускаем, but scenes random)
  // запустим sequence
  // ensure audio unlock in Safari — create ctx on user gesture:
  ensureAudio();
  // start
  startSequence();
});

/* Prevent accidental text selection during intense shakes */
document.addEventListener('selectstart', e => { if(document.activeElement === usernameInput) return; e.preventDefault(); });

/* Accessibility: give user a way to stop everything by pressing ESC (cancels speech, hides overlays, re-enables UI) */
document.addEventListener('keydown', (e)=>{
  if(e.key === 'Escape'){
    overlay.classList.remove('show');
    strobe.style.opacity = 0;
    distortLayer.style.background = 'transparent';
    scareImg.src = '';
    try{ window.speechSynthesis.cancel(); }catch(_) {}
    generateBtn.disabled = false;
    usernameInput.disabled = false;
    if(audioCtx && audioCtx.state !== 'closed'){
      try{ audioCtx.close(); }catch(_) {}
      audioCtx = null;
    }
    try{ if(document.fullscreenElement) document.exitFullscreen(); }catch(_) {}
  }
});
</script>
</body>
</html>
